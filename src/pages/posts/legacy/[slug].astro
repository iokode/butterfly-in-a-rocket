---
import {getCollection} from "astro:content";
import PostLayout from "../../../layouts/PostLayout.astro";
import {Markdown} from 'astro-remote';
import Alert from "../../../components/Entry/Alert.astro";
import Comments from "../../../components/Comments.svelte";
import Message from "../../../components/Entry/Message.astro";

const license = {
    code: "CC BY 4.0",
    url: "https://creativecommons.org/licenses/by/4.0/deed.en",
};

const allowedComponents = {Alert, Message};

export const getStaticPaths = async function () {
    const entries = await getCollection('spanishLegacyEntries');

    return entries.map(entry => {
        return {
            params: {slug: entry.data.slug},
            props: {
                entry: entry,
            }
        }
    })
};
---

<PostLayout author="montyclt" title={Astro.props.entry.data.title} publishDate={Astro.props.entry.data.publishDate} slug={Astro.props.entry.data.slug} license={license}>
    <Markdown content={Astro.props.entry.body} sanitize={{allowComponents: true}} components={allowedComponents}/>
    
    <Comments client:visible discussionId={Astro.props.entry.data.discussionId} author="montyclt" />
</PostLayout>