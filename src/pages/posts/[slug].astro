---
import {getCollection} from "astro:content";
import PostLayout from "../../layouts/PostLayout.astro";
import {Markdown} from 'astro-remote';
import Alert from "../../components/Entry/Alert.astro";
import Conversation from "../../components/Entry/Conversation.astro";
import XPost from "../../components/Entry/XPost.astro";

const allowedComponents = {Alert, Conversation, XPost};

export const getStaticPaths = async function () {
    const entries = await getCollection('entries');

    return entries.map(entry => {
        return {
            params: {slug: entry.data.slug},
            props: {
                entry: entry,
            }
        }
    })
};
---
<PostLayout author={Astro.props.entry.data.author} title={Astro.props.entry.data.title} date={Astro.props.entry.data.publishDate}>
    <Markdown content={Astro.props.entry.data.body} sanitize={{allowComponents: true}} components={allowedComponents}/>
</PostLayout>