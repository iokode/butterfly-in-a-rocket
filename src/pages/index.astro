---
import LinkToPost from "../components/LinkToPost.astro";
import Layout from "../layouts/Layout.astro";
import {getCollection} from "astro:content";

const posts = (await getCollection('entries'))
    .sort((a, b) => b.data.publishDate.valueOf() - a.data.publishDate.valueOf())
    .slice(0, 5);
---

<Layout title="The opinionated tech blog">
    <div class="posts">
        {posts.map(post => <LinkToPost post={post}/>)}
    </div>

    <p>Browse the <a href="/archive">archive</a> for older posts.</p>
</Layout>

<style lang="scss">
    @use "../styles/variables/colors";

    .posts {
        display: flex;
        flex-direction: column;
        gap: 2em;
    }
</style>
