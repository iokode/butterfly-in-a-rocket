---
import LinkToPost from "../components/LinkToPost.astro";
import Layout from "../layouts/Layout.astro";
import {getCollection} from "astro:content";

let posts = (await getCollection('posts'))
    .sort((a, b) => b.data.publishDate.valueOf() - a.data.publishDate.valueOf())
    .slice(0, 5);

posts = posts.filter(post => !post.data.tags.includes('spanish-legacy-post'));
---

<Layout title="" description="The opinionated tech blog. Discover the latest posts and browse our archive.">
    <div class="posts">
        {posts.map(post => <LinkToPost post={post}/>)}
    </div>

    <p class="archive">Browse the <a href="/archive">archive</a> for older posts.</p>
</Layout>

<style lang="scss">
    @use "../styles/variables/colors";

    .posts {
        // Flex
        display: flex;
        flex-direction: column;
        gap: 2em;
    }

    .archive {
        // Boxing
        margin-top: 3em;
    }
</style>
